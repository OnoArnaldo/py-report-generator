from reportlab.lib import pagesizes
from reportlab.lib.units import cm
from reportgen.elements import Barcode
from reportgen.enums import FontAlign


def test_barcode_128(canvas):
    barcode = Barcode(canvas) \
        .parent_size(*pagesizes.A4) \
        .code_set('128C') \
        .bar_width(0.1 * cm) \
        .height(5 * cm) \
        .align(FontAlign.CENTER) \
        .value('1234567890') \
        .draw()

    barcode.build_sibling(Barcode) \
        .margin(cm) \
        .code_set('128C') \
        .bar_width(0.1 * cm) \
        .height(5 * cm) \
        .align(FontAlign.LEFT) \
        .value('0987654321') \
        .draw()

    canvas.save()

    assert object.__getattribute__(canvas, 'log') == [
        ['canvas/rect(..)',
         (170.07874015748033, 0, 5.669291338582678, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (175.748031496063, 0, 2.834645669291339, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (178.58267716535434, 0, 2.834645669291339, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (181.4173228346457, 0, 5.669291338582678, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (187.08661417322836, 0, 8.503937007874017, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (195.59055118110237, 0, 5.669291338582678, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (201.25984251968504, 0, 2.834645669291339, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (204.09448818897638, 0, 2.834645669291339, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (206.92913385826773, 0, 5.669291338582678, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (212.5984251968504, 0, 5.669291338582678, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (218.26771653543307, 0, 8.503937007874017, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (226.77165354330708, 0, 5.669291338582678, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (232.44094488188975, 0, 2.834645669291339, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (235.2755905511811, 0, 8.503937007874017, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (243.7795275590551, 0, 2.834645669291339, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (246.61417322834646, 0, 2.834645669291339, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (249.4488188976378, 0, 5.669291338582678, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (255.11811023622047, 0, 8.503937007874017, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (263.6220472440945, 0, 8.503937007874017, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (272.12598425196853, 0, 8.503937007874017, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (280.62992125984255, 0, 2.834645669291339, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (283.46456692913387, 0, 2.834645669291339, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (286.2992125984252, 0, 5.669291338582678, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (291.9685039370079, 0, 2.834645669291339, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (294.8031496062992, 0, 5.669291338582678, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (300.4724409448819, 0, 11.338582677165356, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (311.81102362204723, 0, 2.834645669291339, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (314.64566929133855, 0, 2.834645669291339, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (317.48031496062987, 0, 2.834645669291339, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (320.3149606299212, 0, 5.669291338582678, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (325.9842519685039, 0, 5.669291338582678, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (331.6535433070866, 0, 2.834645669291339, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (334.4881889763779, 0, 11.338582677165356, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (345.82677165354323, 0, 2.834645669291339, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (348.66141732283455, 0, 5.669291338582678, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (354.33070866141725, 0, 2.834645669291339, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (357.16535433070857, 0, 2.834645669291339, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (359.9999999999999, 0, 5.669291338582678, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (365.6692913385826, 0, 11.338582677165356, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (377.0078740157479, 0, 5.669291338582678, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (382.6771653543306, 0, 2.834645669291339, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (385.51181102362193, 0, 2.834645669291339, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (388.34645669291325, 0, 5.669291338582678, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (394.01574803149595, 0, 8.503937007874017, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (402.51968503936996, 0, 8.503937007874017, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (411.023622047244, 0, 2.834645669291339, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (413.8582677165353, 0, 2.834645669291339, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (416.6929133858266, 0, 2.834645669291339, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (419.52755905511793, 0, 5.669291338582678, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (28.346456692913385,
          170.07874015748033,
          5.669291338582678,
          141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (34.01574803149606,
          170.07874015748033,
          2.834645669291339,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (36.8503937007874, 170.07874015748033, 2.834645669291339, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (39.68503937007874,
          170.07874015748033,
          5.669291338582678,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (45.35433070866142,
          170.07874015748033,
          8.503937007874017,
          141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (53.85826771653544,
          170.07874015748033,
          5.669291338582678,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (59.52755905511812,
          170.07874015748033,
          5.669291338582678,
          141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (65.1968503937008, 170.07874015748033, 5.669291338582678, 141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (70.86614173228348,
          170.07874015748033,
          2.834645669291339,
          141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (73.70078740157481,
          170.07874015748033,
          5.669291338582678,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (79.3700787401575, 170.07874015748033, 2.834645669291339, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (82.20472440944883,
          170.07874015748033,
          8.503937007874017,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (90.70866141732284,
          170.07874015748033,
          11.338582677165356,
          141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (102.0472440944882,
          170.07874015748033,
          5.669291338582678,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (107.71653543307089,
          170.07874015748033,
          2.834645669291339,
          141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (110.55118110236222,
          170.07874015748033,
          2.834645669291339,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (113.38582677165356,
          170.07874015748033,
          2.834645669291339,
          141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (116.22047244094489,
          170.07874015748033,
          5.669291338582678,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (121.88976377952757,
          170.07874015748033,
          2.834645669291339,
          141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (124.7244094488189,
          170.07874015748033,
          5.669291338582678,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (130.39370078740157,
          170.07874015748033,
          2.834645669291339,
          141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (133.22834645669292,
          170.07874015748033,
          2.834645669291339,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (136.06299212598427,
          170.07874015748033,
          5.669291338582678,
          141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (141.73228346456693,
          170.07874015748033,
          11.338582677165356,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (153.0708661417323,
          170.07874015748033,
          2.834645669291339,
          141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (155.90551181102364,
          170.07874015748033,
          2.834645669291339,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (158.740157480315, 170.07874015748033, 5.669291338582678, 141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (164.40944881889766,
          170.07874015748033,
          8.503937007874017,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (172.91338582677167,
          170.07874015748033,
          8.503937007874017,
          141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (181.4173228346457,
          170.07874015748033,
          2.834645669291339,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (184.25196850393704,
          170.07874015748033,
          5.669291338582678,
          141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (189.9212598425197,
          170.07874015748033,
          2.834645669291339,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (192.75590551181105,
          170.07874015748033,
          8.503937007874017,
          141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (201.25984251968507,
          170.07874015748033,
          5.669291338582678,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (206.92913385826773,
          170.07874015748033,
          2.834645669291339,
          141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (209.76377952755908,
          170.07874015748033,
          5.669291338582678,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (215.43307086614175,
          170.07874015748033,
          5.669291338582678,
          141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (221.10236220472441,
          170.07874015748033,
          2.834645669291339,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (223.93700787401576,
          170.07874015748033,
          2.834645669291339,
          141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (226.7716535433071,
          170.07874015748033,
          8.503937007874017,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (235.27559055118112,
          170.07874015748033,
          2.834645669291339,
          141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (238.11023622047247,
          170.07874015748033,
          8.503937007874017,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (246.6141732283465,
          170.07874015748033,
          5.669291338582678,
          141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (252.28346456692915,
          170.07874015748033,
          8.503937007874017,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (260.7874015748032,
          170.07874015748033,
          8.503937007874017,
          141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (269.2913385826772,
          170.07874015748033,
          2.834645669291339,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (272.12598425196853,
          170.07874015748033,
          2.834645669291339,
          141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/rect(..)',
         (274.96062992125985,
          170.07874015748033,
          2.834645669291339,
          141.73228346456693),
         {'fill': 0, 'stroke': 0}],
        ['canvas/rect(..)',
         (277.79527559055117,
          170.07874015748033,
          5.669291338582678,
          141.73228346456693),
         {'fill': 1, 'stroke': 0}],
        ['canvas/save(..)', (), {}]
    ]
